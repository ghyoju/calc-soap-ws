package com.example.calculator;

import jakarta.annotation.Resource;
import jakarta.jws.WebService;
import jakarta.xml.ws.WebServiceContext;
import jakarta.xml.ws.handler.MessageContext;
import org.apache.cxf.phase.PhaseInterceptorChain;
import org.apache.cxf.message.Message;

@WebService(
    endpointInterface = "com.example.calculator.CalculatorService",
    serviceName = "CalculatorService",
    portName = "CalculatorPort",
    targetNamespace = "http://example.com/calculator"
)
public class CalculatorServiceImpl implements CalculatorService {

    @Resource
    private WebServiceContext wsContext;

    private void logMethodName() {
        Message message = PhaseInterceptorChain.getCurrentMessage();
        if (message != null) {
            String operationName = (String) message.get(Message.WSDL_OPERATION);
            System.out.println("Invoked SOAP method: " + operationName);
        } else {
            System.out.println("Could not determine SOAP method name");
        }
    }

    @Override
    public int add(int a, int b) {
        logMethodName();
        return a + b;
    }

    @Override
    public int subtract(int a, int b) {
        logMethodName();
        return a - b;
    }
}
